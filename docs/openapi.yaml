{"openapi":"3.1.0","info":{"title":"Bank_REST","description":"API банковской системы","version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"CardPrivateController","description":"Операции пользователя с картами"},{"name":"CardAdminController","description":"Административные операции с картами"},{"name":"RoleAdminController","description":"Управление ролями"},{"name":"UserPublicController","description":"Регистрация пользователей"},{"name":"UserPrivateController","description":"Профиль пользователя"},{"name":"UserAdminController","description":"Управление пользователями (админ)"}],"paths":{"/admin/roles/{roleId}":{"put":{"tags":["RoleAdminController"],"summary":"Обновить роль","description":"Изменение данных роли. Требует роли ADMIN","operationId":"update","parameters":[{"name":"roleId","in":"path","description":"ID роли","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Роль не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Роль обновлена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}}},"security":[{"JWT":[]}]},"delete":{"tags":["RoleAdminController"],"summary":"Удалить роль","description":"Удаление роли по ID. Требует роли ADMIN","operationId":"delete","parameters":[{"name":"roleId","in":"path","description":"ID роли","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Нельзя удалить системную роль","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Роль не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"204":{"description":"Роль удалена"}},"security":[{"JWT":[]}]}},"/registration":{"post":{"tags":["UserPublicController"],"summary":"Зарегистрировать пользователя","description":"Создание нового аккаунта (публичный доступ)","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegistrationRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Неверные данные регистрации","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"201":{"description":"Пользователь создан","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"409":{"description":"Логин/email уже занят","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/cards":{"get":{"tags":["CardPrivateController"],"summary":"Получить карты пользователя","description":"Список карт текущего пользователя с пагинацией. Требует роли USER","operationId":"getCardsByOwner","parameters":[{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","default":0,"minimum":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","default":10,"minimum":1},"example":10},{"name":"sort","in":"query","description":"Поле сортировки","required":false,"schema":{"type":"array","default":["balance,ASC"],"items":{"type":"string"}},"example":"balance,asc"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Успешное получение списка","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CardResponse"}}}}},"403":{"description":"Доступ запрещен","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CardResponse"}}}}}},"security":[{"JWT":[]}]},"post":{"tags":["CardPrivateController"],"summary":"Создать новую карту","description":"Создание банковской карты для текущего пользователя. Требует роли USER","operationId":"create_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Неверные данные карты","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"201":{"description":"Карта успешно создана","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}},"403":{"description":"Доступ запрещен","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}}},"security":[{"JWT":[]}]}},"/cards/transactions":{"post":{"tags":["CardPrivateController"],"summary":"Создать транзакцию","description":"Перевод средств между картами. Требует роли USER","operationId":"createTransaction","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Неверные параметры перевода","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"201":{"description":"Транзакция создана","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"403":{"description":"Доступ запрещен","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"security":[{"JWT":[]}]}},"/auth":{"post":{"tags":["auth-controller"],"operationId":"createToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JwtRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JwtResponse"}}}}}}},"/admin/roles":{"get":{"tags":["RoleAdminController"],"summary":"Получить все роли","description":"Список всех ролей с пагинацией. Требует роли ADMIN","operationId":"getAll","parameters":[{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","default":0,"minimum":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","default":10,"minimum":1},"example":10},{"name":"sort","in":"query","description":"Поле сортировки","required":false,"schema":{"type":"array","default":["name,ASC"],"items":{"type":"string"}},"example":"name,asc"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Успешное получение списка","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"}}}}},"403":{"description":"Доступ запрещен","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoleResponse"}}}}}},"security":[{"JWT":[]}]},"post":{"tags":["RoleAdminController"],"summary":"Создать роль","description":"Создание новой роли в системе. Требует роли ADMIN","operationId":"create_2","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Неверные параметры","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"201":{"description":"Роль создана","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}},"409":{"description":"Роль уже существует","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}}},"security":[{"JWT":[]}]}},"/users":{"patch":{"tags":["UserPrivateController"],"summary":"Обновить профиль","description":"Изменение данных пользователя. Требует роли USER","operationId":"update_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Неверные данные","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Профиль обновлен","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"409":{"description":"Логин/email уже занят","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"JWT":[]}]}},"/admin/users":{"get":{"tags":["UserAdminController"],"summary":"Получить всех пользователей","description":"Список пользователей с пагинацией. Требует роли ADMIN","operationId":"getAll_1","parameters":[{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","default":0,"minimum":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","default":10,"minimum":1},"example":10},{"name":"sort","in":"query","description":"Поле сортировки","required":false,"schema":{"type":"array","default":["username,ASC"],"items":{"type":"string"}},"example":"username,asc"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Успешное получение списка","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"}}}}},"403":{"description":"Доступ запрещен","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"}}}}}},"security":[{"JWT":[]}]},"patch":{"tags":["UserAdminController"],"summary":"Изменить роль пользователя","description":"Добавление или удаление роли у пользователя. Требует роли ADMIN","operationId":"changeRole","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeRoleRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Невозможно изменить системные роли","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Пользователь или роль не найдены","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Роль изменена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"JWT":[]}]}},"/admin/cards/transactions/{transactionId}":{"patch":{"tags":["CardAdminController"],"summary":"Обновить статус транзакции","description":"Изменение статуса финансовой операции. Требует роли ADMIN","operationId":"updateStatusTransaction","parameters":[{"name":"transactionId","in":"path","description":"ID транзакции","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionUpdateRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Неверный запрос","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Транзакция не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Статус обновлен","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}}},"security":[{"JWT":[]}]}},"/admin/cards/moderation":{"patch":{"tags":["CardAdminController"],"summary":"Обновить статус карты","description":"Модерация статуса карты (например, блокировка). Требует роли ADMIN","operationId":"updateStatus","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardUpdateStatusRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Неверный запрос","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Карта не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"204":{"description":"Статус обновлен"}},"security":[{"JWT":[]}]}},"/cards/transactions/{cardId}":{"get":{"tags":["CardPrivateController"],"summary":"Получить транзакции по карте","description":"История операций по конкретной карте с фильтром по статусу. Требует роли USER","operationId":"getTransactionsByCard","parameters":[{"name":"cardId","in":"path","description":"ID карты","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"status","in":"query","description":"Статус транзакции","required":true,"schema":{"type":"string","enum":["PENDING","SUCCESS","FAILED"]},"example":"SUCCESS"},{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","default":0,"minimum":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","default":10,"minimum":1},"example":10},{"name":"sort","in":"query","description":"Поле сортировки","required":false,"schema":{"type":"array","default":["timestamp,ASC"],"items":{"type":"string"}},"example":"timestamp,asc"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Карта не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Успешное получение списка","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionFullResponse"}}}}},"403":{"description":"Доступ запрещен","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionFullResponse"}}}}}},"security":[{"JWT":[]}]}},"/admin/users/{userId}":{"get":{"tags":["UserAdminController"],"summary":"Получить пользователя по ID","description":"Получение детальной информации о пользователе. Требует роли ADMIN","operationId":"getById","parameters":[{"name":"userId","in":"path","description":"ID пользователя","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Пользователь не найден","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Пользователь найден","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"JWT":[]}]},"delete":{"tags":["UserAdminController"],"summary":"Удалить пользователя","description":"Удаление пользователя по ID. Требует роли ADMIN","operationId":"deleteById","parameters":[{"name":"userId","in":"path","description":"ID пользователя","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Нельзя удалить текущего пользователя","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Пользователь не найден","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"204":{"description":"Пользователь удален"}},"security":[{"JWT":[]}]}},"/admin/roles/{roleName}":{"get":{"tags":["RoleAdminController"],"summary":"Получить роль по имени","description":"Поиск роли по названию. Требует роли ADMIN","operationId":"getByName","parameters":[{"name":"roleName","in":"path","description":"Название роли","required":true,"schema":{"type":"string"},"example":"USER"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Роль не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Роль найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}}},"security":[{"JWT":[]}]}},"/admin/cards":{"get":{"tags":["CardAdminController"],"summary":"Получить список карт","description":"Фильтрация по статусу и владельцу с пагинацией. Требует роли ADMIN","operationId":"getCards","parameters":[{"name":"status","in":"query","description":"Статус карты","required":false,"schema":{"type":"string","enum":["ACTIVE","BLOCKED","EXPIRED"]},"example":"ACTIVE"},{"name":"username","in":"query","description":"Имя пользователя","required":false,"schema":{"type":"string"},"example":"user123"},{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","default":0,"minimum":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","default":10,"minimum":1},"example":10},{"name":"sort","in":"query","description":"Поле сортировки","required":false,"schema":{"type":"array","default":["balance,ASC"],"items":{"type":"string"}},"example":"balance,asc"}],"responses":{"401":{"description":"Не авторизован","content":{}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Успешное получение списка","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CardResponse"}}}}},"403":{"description":"Доступ запрещен"}},"security":[{"JWT":[]}]}},"/admin/cards/transactions":{"get":{"tags":["CardAdminController"],"summary":"Получить список транзакций","description":"Фильтрация по карте и статусу с пагинацией. Требует роли ADMIN","operationId":"getTransactions","parameters":[{"name":"sourceCardId","in":"query","description":"ID исходной карты","required":false,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"status","in":"query","description":"Статус транзакции","required":false,"schema":{"type":"string","enum":["PENDING","SUCCESS","FAILED"]},"example":"SUCCESS"},{"name":"page","in":"query","description":"Номер страницы","required":false,"schema":{"type":"integer","default":0,"minimum":0},"example":0},{"name":"size","in":"query","description":"Размер страницы","required":false,"schema":{"type":"integer","default":10,"minimum":1},"example":10},{"name":"sort","in":"query","description":"Поле сортировки","required":false,"schema":{"type":"array","default":["timestamp,ASC"],"items":{"type":"string"}},"example":"timestamp,asc"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"200":{"description":"Успешное получение списка","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionFullResponse"}}}}},"403":{"description":"Доступ запрещен","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionFullResponse"}}}}}},"security":[{"JWT":[]}]}},"/cards/{cardId}":{"delete":{"tags":["CardPrivateController"],"summary":"Удалить карту пользователя","description":"Удаление собственной карты. Требует роли USER","operationId":"deleteOwnerCard","parameters":[{"name":"cardId","in":"path","description":"ID карты","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Карта не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"204":{"description":"Карта удалена"},"403":{"description":"Недостаточно прав"}},"security":[{"JWT":[]}]}},"/admin/cards/{cardId}":{"delete":{"tags":["CardAdminController"],"summary":"Удалить карту","description":"Полное удаление карты из системы. Требует роли ADMIN","operationId":"delete_1","parameters":[{"name":"cardId","in":"path","description":"ID карты","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Карта не найдена","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"204":{"description":"Карта удалена"}},"security":[{"JWT":[]}]}}},"components":{"schemas":{"ApiError":{"type":"object","properties":{"status":{"type":"string","enum":["100 CONTINUE","101 SWITCHING_PROTOCOLS","102 PROCESSING","103 EARLY_HINTS","103 CHECKPOINT","200 OK","201 CREATED","202 ACCEPTED","203 NON_AUTHORITATIVE_INFORMATION","204 NO_CONTENT","205 RESET_CONTENT","206 PARTIAL_CONTENT","207 MULTI_STATUS","208 ALREADY_REPORTED","226 IM_USED","300 MULTIPLE_CHOICES","301 MOVED_PERMANENTLY","302 FOUND","302 MOVED_TEMPORARILY","303 SEE_OTHER","304 NOT_MODIFIED","305 USE_PROXY","307 TEMPORARY_REDIRECT","308 PERMANENT_REDIRECT","400 BAD_REQUEST","401 UNAUTHORIZED","402 PAYMENT_REQUIRED","403 FORBIDDEN","404 NOT_FOUND","405 METHOD_NOT_ALLOWED","406 NOT_ACCEPTABLE","407 PROXY_AUTHENTICATION_REQUIRED","408 REQUEST_TIMEOUT","409 CONFLICT","410 GONE","411 LENGTH_REQUIRED","412 PRECONDITION_FAILED","413 PAYLOAD_TOO_LARGE","413 REQUEST_ENTITY_TOO_LARGE","414 URI_TOO_LONG","414 REQUEST_URI_TOO_LONG","415 UNSUPPORTED_MEDIA_TYPE","416 REQUESTED_RANGE_NOT_SATISFIABLE","417 EXPECTATION_FAILED","418 I_AM_A_TEAPOT","419 INSUFFICIENT_SPACE_ON_RESOURCE","420 METHOD_FAILURE","421 DESTINATION_LOCKED","422 UNPROCESSABLE_ENTITY","423 LOCKED","424 FAILED_DEPENDENCY","425 TOO_EARLY","426 UPGRADE_REQUIRED","428 PRECONDITION_REQUIRED","429 TOO_MANY_REQUESTS","431 REQUEST_HEADER_FIELDS_TOO_LARGE","451 UNAVAILABLE_FOR_LEGAL_REASONS","500 INTERNAL_SERVER_ERROR","501 NOT_IMPLEMENTED","502 BAD_GATEWAY","503 SERVICE_UNAVAILABLE","504 GATEWAY_TIMEOUT","505 HTTP_VERSION_NOT_SUPPORTED","506 VARIANT_ALSO_NEGOTIATES","507 INSUFFICIENT_STORAGE","508 LOOP_DETECTED","509 BANDWIDTH_LIMIT_EXCEEDED","510 NOT_EXTENDED","511 NETWORK_AUTHENTICATION_REQUIRED"]},"reason":{"type":"string"},"message":{"type":"string"},"timestamp":{"type":"string","format":"date-time"}}},"RoleRequest":{"type":"object","properties":{"name":{"type":"string","maxLength":20,"minLength":3,"pattern":"^[a-zA-Z_]+$"}},"required":["name"]},"RoleResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}}},"UserRegistrationRequest":{"type":"object","properties":{"username":{"type":"string","maxLength":50,"minLength":4},"password":{"type":"string","maxLength":100,"minLength":6,"pattern":"\\S+"},"confirmPassword":{"type":"string","minLength":1},"email":{"type":"string","minLength":1}},"required":["confirmPassword","email","password","username"]},"UserResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"}}},"CardRequest":{"type":"object","properties":{"cardNumber":{"type":"string","minLength":1,"pattern":"^[0-9]{16}$"},"expirationDate":{"type":"string","format":"date"}},"required":["cardNumber","expirationDate"]},"CardResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"maskedCardNumber":{"type":"string"},"ownerName":{"type":"string"},"expirationDate":{"type":"string"},"balance":{"type":"number"},"status":{"type":"string","enum":["ACTIVE","BLOCKED","EXPIRED"]}}},"TransactionRequest":{"type":"object","properties":{"sourceCardId":{"type":"integer","format":"int64"},"targetCardId":{"type":"integer","format":"int64"},"amount":{"type":"number","minimum":0.01}},"required":["amount","sourceCardId","targetCardId"]},"TransactionResponse":{"type":"object","properties":{"status":{"type":"string","enum":["PENDING","SUCCESS","FAILED"]},"message":{"type":"string"}}},"JwtRequest":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"JwtResponse":{"type":"object","properties":{"token":{"type":"string"}}},"UserUpdateRequest":{"type":"object","properties":{"username":{"type":"string","maxLength":50,"minLength":4},"password":{"type":"string","maxLength":100,"minLength":6,"pattern":"\\S+"},"confirmPassword":{"type":"string","maxLength":100,"minLength":6,"pattern":"\\S+"},"email":{"type":"string"},"passwordConsistent":{"type":"boolean"},"passwordsMatch":{"type":"boolean"}}},"ChangeRoleRequest":{"type":"object","properties":{"username":{"type":"string","maxLength":50,"minLength":4},"role":{"type":"string","minLength":1},"operationType":{"type":"string","enum":["ADD","REMOVE"]}},"required":["operationType","role","username"]},"TransactionUpdateRequest":{"type":"object","properties":{"status":{"type":"string","enum":["PENDING","SUCCESS","FAILED"]}},"required":["status"]},"CardUpdateStatusRequest":{"type":"object","properties":{"cardNumber":{"type":"string","minLength":1},"status":{"type":"string","enum":["ACTIVE","BLOCKED","EXPIRED"]}},"required":["cardNumber"]},"TransactionFullResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"sourceCardNumber":{"type":"string"},"targetCardNumber":{"type":"string"},"amount":{"type":"number"},"timestamp":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["PENDING","SUCCESS","FAILED"]}}}},"securitySchemes":{"JWT":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}